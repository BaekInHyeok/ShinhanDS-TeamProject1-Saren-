<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
      PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.saren.order_detail">
	
	<select id="selectAll" resultType="order_detailVO">
		SELECT *
		FROM ORDER_DETAIL
	</select>
	<select id="selectByOrderDetail_Id" parameterType="int"
		resultType="order_detailVO">
		SELECT *
		FROM ORDER_DETAIL
		WHERE "orderdetail_id" = #{orderdetail_id}
	</select>
	
	<!-- 주문상세 생성 - 결제대기상태 (주문상태 칼럼 추가) -->
	<insert id="orderDetailInsert" parameterType="order_detailVO">
		INSERT
		INTO ORDER_DETAIL(orderdetail_id, order_product_price, order_num, order_id, s_stock_id, order_state)
		VALUES(
				order_detail_sequence.nextval, 
				#{order_product_price},
				#{order_num}, 
				#{order_id}, 
				#{s_stock_id}, 
				'결제대기'
				)
	</insert>
	
	<update id="orderDetailUpdate" parameterType="order_detailVO">
		UPDATE ORDER_DETAIL
		SET
			"orderdetail_id" = #{orderdetail_id}, 
			"order_product_price" = #{order_product_price}, 
			"order_num" = #{order_num},
			"order_id" = #{order_id}, 
			"stock_id" = #{stock_id}
		WHERE orderdetail_id = #{orderdetail_id}
	</update>
	
	<delete id="orderDetailDelete" parameterType="order_detailVO">
		DELETE
		FROM ORDER_DETAIL
		WHERE "orderdetail_id" = #{orderdetail_id}
	</delete>
	
</mapper>